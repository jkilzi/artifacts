{"version":3,"file":"NodeInstanceUtils.esm.js","sources":["../../src/utils/NodeInstanceUtils.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport moment from 'moment';\n\nimport { NodeInstanceDTO } from '@red-hat-developer-hub/backstage-plugin-orchestrator-common';\n\nimport { isNonNullable } from './TypeGuards';\n\nexport const compareNodes = (\n  nodeA: NodeInstanceDTO,\n  nodeB: NodeInstanceDTO,\n) => {\n  const aEnter = moment(nodeA.enter);\n  const bEnter = moment(nodeB.enter);\n  if (aEnter.isBefore(bEnter)) {\n    return -1;\n  } else if (aEnter.isAfter(bEnter)) {\n    return 1;\n  }\n\n  if (isNonNullable(nodeA.exit) && isNonNullable(nodeB.exit)) {\n    const aExit = moment(nodeA.exit);\n    const bExit = moment(nodeB.exit);\n    if (aExit.isBefore(bExit)) {\n      return -1;\n    } else if (aExit.isAfter(bExit)) {\n      return 1;\n    }\n  } else {\n    // nodeA exited, but nodeB didn't\n    if (isNonNullable(nodeA.exit)) return -1;\n    // nodeB exited, but nodeA didn't\n    if (isNonNullable(nodeB.exit)) return 1;\n  }\n\n  if (nodeA.id < nodeB.id) {\n    return -1;\n  } else if (nodeA.id > nodeB.id) {\n    return 1;\n  }\n\n  return 0;\n};\n"],"names":[],"mappings":";;;AAqBa,MAAA,YAAA,GAAe,CAC1B,KAAA,EACA,KACG,KAAA;AACH,EAAM,MAAA,MAAA,GAAS,MAAO,CAAA,KAAA,CAAM,KAAK,CAAA,CAAA;AACjC,EAAM,MAAA,MAAA,GAAS,MAAO,CAAA,KAAA,CAAM,KAAK,CAAA,CAAA;AACjC,EAAI,IAAA,MAAA,CAAO,QAAS,CAAA,MAAM,CAAG,EAAA;AAC3B,IAAO,OAAA,CAAA,CAAA,CAAA;AAAA,GACE,MAAA,IAAA,MAAA,CAAO,OAAQ,CAAA,MAAM,CAAG,EAAA;AACjC,IAAO,OAAA,CAAA,CAAA;AAAA,GACT;AAEA,EAAA,IAAI,cAAc,KAAM,CAAA,IAAI,KAAK,aAAc,CAAA,KAAA,CAAM,IAAI,CAAG,EAAA;AAC1D,IAAM,MAAA,KAAA,GAAQ,MAAO,CAAA,KAAA,CAAM,IAAI,CAAA,CAAA;AAC/B,IAAM,MAAA,KAAA,GAAQ,MAAO,CAAA,KAAA,CAAM,IAAI,CAAA,CAAA;AAC/B,IAAI,IAAA,KAAA,CAAM,QAAS,CAAA,KAAK,CAAG,EAAA;AACzB,MAAO,OAAA,CAAA,CAAA,CAAA;AAAA,KACE,MAAA,IAAA,KAAA,CAAM,OAAQ,CAAA,KAAK,CAAG,EAAA;AAC/B,MAAO,OAAA,CAAA,CAAA;AAAA,KACT;AAAA,GACK,MAAA;AAEL,IAAA,IAAI,aAAc,CAAA,KAAA,CAAM,IAAI,CAAA,EAAU,OAAA,CAAA,CAAA,CAAA;AAEtC,IAAA,IAAI,aAAc,CAAA,KAAA,CAAM,IAAI,CAAA,EAAU,OAAA,CAAA,CAAA;AAAA,GACxC;AAEA,EAAI,IAAA,KAAA,CAAM,EAAK,GAAA,KAAA,CAAM,EAAI,EAAA;AACvB,IAAO,OAAA,CAAA,CAAA,CAAA;AAAA,GACE,MAAA,IAAA,KAAA,CAAM,EAAK,GAAA,KAAA,CAAM,EAAI,EAAA;AAC9B,IAAO,OAAA,CAAA,CAAA;AAAA,GACT;AAEA,EAAO,OAAA,CAAA,CAAA;AACT;;;;"}