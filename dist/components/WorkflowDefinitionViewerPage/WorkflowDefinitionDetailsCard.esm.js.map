{"version":3,"file":"WorkflowDefinitionDetailsCard.esm.js","sources":["../../../src/components/WorkflowDefinitionViewerPage/WorkflowDefinitionDetailsCard.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport { InfoCard } from '@backstage/core-components';\nimport { AboutField } from '@backstage/plugin-catalog';\n\nimport { Grid, makeStyles } from '@material-ui/core';\nimport { Skeleton } from '@material-ui/lab';\n\nimport {\n  ProcessInstanceStatusDTO,\n  WorkflowOverviewDTO,\n} from '@red-hat-developer-hub/backstage-plugin-orchestrator-common';\n\nimport { VALUE_UNAVAILABLE } from '../../constants';\nimport WorkflowOverviewFormatter from '../../dataFormatters/WorkflowOverviewFormatter';\nimport { WorkflowInstanceStatusIndicator } from '../WorkflowInstanceStatusIndicator';\n\nconst useStyles = makeStyles({\n  details: {\n    overflowY: 'auto',\n    height: '15rem',\n  },\n});\n\nconst WorkflowDefinitionDetailsCard = ({\n  loading,\n  workflowOverview,\n}: {\n  loading: boolean;\n  workflowOverview?: WorkflowOverviewDTO;\n}) => {\n  const classes = useStyles();\n\n  const formattedWorkflowOverview = React.useMemo(\n    () =>\n      workflowOverview\n        ? WorkflowOverviewFormatter.format(workflowOverview)\n        : undefined,\n    [workflowOverview],\n  );\n\n  const details = React.useMemo(\n    () => [\n      {\n        label: 'type',\n        value: formattedWorkflowOverview?.category,\n      },\n\n      {\n        label: 'last run',\n        value: formattedWorkflowOverview?.lastTriggered,\n      },\n      {\n        label: 'last run status',\n        value: formattedWorkflowOverview?.lastRunStatus,\n        children:\n          formattedWorkflowOverview?.lastRunStatus !== VALUE_UNAVAILABLE ? (\n            <WorkflowInstanceStatusIndicator\n              status={\n                formattedWorkflowOverview?.lastRunStatus as ProcessInstanceStatusDTO\n              }\n              lastRunId={formattedWorkflowOverview?.lastRunId}\n            />\n          ) : (\n            VALUE_UNAVAILABLE\n          ),\n      },\n    ],\n    [formattedWorkflowOverview],\n  );\n\n  return (\n    <InfoCard title=\"Details\" className={classes.details}>\n      <Grid container spacing={3} alignContent=\"flex-start\">\n        <Grid container item md={4} spacing={3} alignContent=\"flex-start\">\n          {details?.map(({ label, value, children }) => (\n            <Grid item md={6} key={label}>\n              {/* AboutField requires the value to be defined as a prop as well */}\n              <AboutField label={label} value={value}>\n                {loading ? <Skeleton variant=\"text\" /> : children || value}\n              </AboutField>\n            </Grid>\n          ))}\n        </Grid>\n        <Grid item md={8}>\n          <AboutField\n            label=\"description\"\n            value={formattedWorkflowOverview?.description}\n          >\n            {loading ? (\n              <Skeleton variant=\"text\" />\n            ) : (\n              formattedWorkflowOverview?.description\n            )}\n          </AboutField>\n        </Grid>\n      </Grid>\n    </InfoCard>\n  );\n};\n\nexport default WorkflowDefinitionDetailsCard;\n"],"names":[],"mappings":";;;;;;;;;AAgCA,MAAM,YAAY,UAAW,CAAA;AAAA,EAC3B,OAAS,EAAA;AAAA,IACP,SAAW,EAAA,MAAA;AAAA,IACX,MAAQ,EAAA,OAAA;AAAA,GACV;AACF,CAAC,CAAA,CAAA;AAED,MAAM,gCAAgC,CAAC;AAAA,EACrC,OAAA;AAAA,EACA,gBAAA;AACF,CAGM,KAAA;AACJ,EAAA,MAAM,UAAU,SAAU,EAAA,CAAA;AAE1B,EAAA,MAAM,4BAA4B,KAAM,CAAA,OAAA;AAAA,IACtC,MACE,gBAAA,GACI,yBAA0B,CAAA,MAAA,CAAO,gBAAgB,CACjD,GAAA,KAAA,CAAA;AAAA,IACN,CAAC,gBAAgB,CAAA;AAAA,GACnB,CAAA;AAEA,EAAA,MAAM,UAAU,KAAM,CAAA,OAAA;AAAA,IACpB,MAAM;AAAA,MACJ;AAAA,QACE,KAAO,EAAA,MAAA;AAAA,QACP,OAAO,yBAA2B,EAAA,QAAA;AAAA,OACpC;AAAA,MAEA;AAAA,QACE,KAAO,EAAA,UAAA;AAAA,QACP,OAAO,yBAA2B,EAAA,aAAA;AAAA,OACpC;AAAA,MACA;AAAA,QACE,KAAO,EAAA,iBAAA;AAAA,QACP,OAAO,yBAA2B,EAAA,aAAA;AAAA,QAClC,QAAA,EACE,yBAA2B,EAAA,aAAA,KAAkB,iBAC3C,mBAAA,KAAA,CAAA,aAAA;AAAA,UAAC,+BAAA;AAAA,UAAA;AAAA,YACC,QACE,yBAA2B,EAAA,aAAA;AAAA,YAE7B,WAAW,yBAA2B,EAAA,SAAA;AAAA,WAAA;AAAA,SAGxC,GAAA,iBAAA;AAAA,OAEN;AAAA,KACF;AAAA,IACA,CAAC,yBAAyB,CAAA;AAAA,GAC5B,CAAA;AAEA,EAAA,uBACG,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,KAAM,EAAA,SAAA,EAAU,SAAW,EAAA,OAAA,CAAQ,OAC3C,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,IAAK,EAAA,EAAA,SAAA,EAAS,IAAC,EAAA,OAAA,EAAS,GAAG,YAAa,EAAA,YAAA,EAAA,kBACtC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,EAAK,SAAS,EAAA,IAAA,EAAC,IAAI,EAAA,IAAA,EAAC,EAAI,EAAA,CAAA,EAAG,OAAS,EAAA,CAAA,EAAG,YAAa,EAAA,YAAA,EAAA,EAClD,OAAS,EAAA,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,KAAO,EAAA,QAAA,EAC7B,qBAAA,KAAA,CAAA,aAAA,CAAC,IAAK,EAAA,EAAA,IAAA,EAAI,IAAC,EAAA,EAAA,EAAI,CAAG,EAAA,GAAA,EAAK,KAErB,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,EAAA,KAAA,EAAc,SACvB,OAAU,mBAAA,KAAA,CAAA,aAAA,CAAC,QAAS,EAAA,EAAA,OAAA,EAAQ,MAAO,EAAA,CAAA,GAAK,QAAY,IAAA,KACvD,CACF,CACD,CACH,CAAA,kBACC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,EAAK,IAAI,EAAA,IAAA,EAAC,IAAI,CACb,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,UAAA;AAAA,IAAA;AAAA,MACC,KAAM,EAAA,aAAA;AAAA,MACN,OAAO,yBAA2B,EAAA,WAAA;AAAA,KAAA;AAAA,IAEjC,0BACE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,EAAS,OAAQ,EAAA,MAAA,EAAO,IAEzB,yBAA2B,EAAA,WAAA;AAAA,GAGjC,CACF,CACF,CAAA,CAAA;AAEJ;;;;"}