{"version":3,"file":"JsonTextAreaForm.esm.js","sources":["../../../src/components/ExecuteWorkflowPage/JsonTextAreaForm.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React from 'react';\n\nimport type { JsonObject } from '@backstage/types';\n\nimport { Box, Grid, useTheme } from '@material-ui/core';\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport { Editor } from '@monaco-editor/react';\n\nimport { SubmitButton } from '@red-hat-developer-hub/backstage-plugin-orchestrator-form-react';\n\nconst DEFAULT_VALUE = JSON.stringify({ myKey: 'myValue' }, null, 4);\n\nconst JsonTextAreaForm = ({\n  isExecuting,\n  handleExecute,\n}: {\n  isExecuting: boolean;\n  handleExecute: (parameters: JsonObject) => Promise<void>;\n}) => {\n  const [jsonText, setJsonText] = React.useState(DEFAULT_VALUE);\n  const theme = useTheme();\n  const getParameters = (): JsonObject => {\n    if (!jsonText) {\n      return {};\n    }\n    const parameters = JSON.parse(jsonText);\n    return parameters as JsonObject;\n  };\n\n  return (\n    <Grid container spacing={2}>\n      <Grid item xs={12}>\n        <Alert severity=\"info\" style={{ width: '100%' }}>\n          <AlertTitle>Missing JSON Schema for Input Form.</AlertTitle>\n          Type the input data in JSON format below.\n          <br />\n          If you prefer using a form to start the workflow, ensure a valid JSON\n          schema is provided in the 'dataInputSchema' property of your workflow\n          definition file.\n        </Alert>\n      </Grid>\n      <Grid item xs={12}>\n        <Box style={{ border: `1px solid ${theme.palette.border}` }}>\n          <Editor\n            value={jsonText}\n            language=\"json\"\n            onChange={(value: string | undefined) => setJsonText(value ?? '')}\n            height=\"30rem\"\n            theme={theme.palette.type === 'dark' ? 'vs-dark' : 'light'}\n            options={{\n              minimap: { enabled: false },\n            }}\n          />\n        </Box>\n      </Grid>\n      <Grid item xs={12}>\n        <SubmitButton\n          submitting={isExecuting}\n          handleClick={() => handleExecute(getParameters())}\n        >\n          Run\n        </SubmitButton>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default JsonTextAreaForm;\n"],"names":[],"mappings":";;;;;;AAyBA,MAAM,aAAA,GAAgB,KAAK,SAAU,CAAA,EAAE,OAAO,SAAU,EAAA,EAAG,MAAM,CAAC,CAAA,CAAA;AAElE,MAAM,mBAAmB,CAAC;AAAA,EACxB,WAAA;AAAA,EACA,aAAA;AACF,CAGM,KAAA;AACJ,EAAA,MAAM,CAAC,QAAU,EAAA,WAAW,CAAI,GAAA,KAAA,CAAM,SAAS,aAAa,CAAA,CAAA;AAC5D,EAAA,MAAM,QAAQ,QAAS,EAAA,CAAA;AACvB,EAAA,MAAM,gBAAgB,MAAkB;AACtC,IAAA,IAAI,CAAC,QAAU,EAAA;AACb,MAAA,OAAO,EAAC,CAAA;AAAA,KACV;AACA,IAAM,MAAA,UAAA,GAAa,IAAK,CAAA,KAAA,CAAM,QAAQ,CAAA,CAAA;AACtC,IAAO,OAAA,UAAA,CAAA;AAAA,GACT,CAAA;AAEA,EACE,uBAAA,KAAA,CAAA,aAAA,CAAC,QAAK,SAAS,EAAA,IAAA,EAAC,SAAS,CACvB,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,IAAK,EAAA,EAAA,IAAA,EAAI,IAAC,EAAA,EAAA,EAAI,sBACZ,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAM,UAAS,MAAO,EAAA,KAAA,EAAO,EAAE,KAAO,EAAA,MAAA,EACrC,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAW,EAAA,IAAA,EAAA,qCAAmC,GAAa,2CAE5D,kBAAA,KAAA,CAAA,aAAA,CAAC,UAAG,CAAE,EAAA,8JAIR,CACF,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,IAAK,EAAA,EAAA,IAAA,EAAI,IAAC,EAAA,EAAA,EAAI,sBACZ,KAAA,CAAA,aAAA,CAAA,GAAA,EAAA,EAAI,OAAO,EAAE,MAAA,EAAQ,aAAa,KAAM,CAAA,OAAA,CAAQ,MAAM,CAAA,CAAA,EACrD,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,MAAA;AAAA,IAAA;AAAA,MACC,KAAO,EAAA,QAAA;AAAA,MACP,QAAS,EAAA,MAAA;AAAA,MACT,QAAU,EAAA,CAAC,KAA8B,KAAA,WAAA,CAAY,SAAS,EAAE,CAAA;AAAA,MAChE,MAAO,EAAA,OAAA;AAAA,MACP,KAAO,EAAA,KAAA,CAAM,OAAQ,CAAA,IAAA,KAAS,SAAS,SAAY,GAAA,OAAA;AAAA,MACnD,OAAS,EAAA;AAAA,QACP,OAAA,EAAS,EAAE,OAAA,EAAS,KAAM,EAAA;AAAA,OAC5B;AAAA,KAAA;AAAA,GAEJ,CACF,CACA,kBAAA,KAAA,CAAA,aAAA,CAAC,QAAK,IAAI,EAAA,IAAA,EAAC,IAAI,EACb,EAAA,kBAAA,KAAA,CAAA,aAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,UAAY,EAAA,WAAA;AAAA,MACZ,WAAa,EAAA,MAAM,aAAc,CAAA,aAAA,EAAe,CAAA;AAAA,KAAA;AAAA,IACjD,KAAA;AAAA,GAGH,CACF,CAAA,CAAA;AAEJ;;;;"}