{"version":3,"file":"WorkflowsTabContent.esm.js","sources":["../../src/components/WorkflowsTabContent.tsx"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport React, { useCallback } from 'react';\n\nimport {\n  Content,\n  Progress,\n  ResponseErrorPanel,\n} from '@backstage/core-components';\nimport { useApi } from '@backstage/core-plugin-api';\n\nimport Grid from '@material-ui/core/Grid/Grid';\n\nimport { WorkflowOverviewDTO } from '@red-hat-developer-hub/backstage-plugin-orchestrator-common';\n\nimport { orchestratorApiRef } from '../api';\nimport usePolling from '../hooks/usePolling';\nimport { WorkflowsTable } from './WorkflowsTable';\n\nexport const WorkflowsTabContent = () => {\n  const orchestratorApi = useApi(orchestratorApiRef);\n\n  const fetchWorkflowOverviews = useCallback(async () => {\n    const overviewsResp = await orchestratorApi.listWorkflowOverviews();\n    return overviewsResp.data.overviews;\n  }, [orchestratorApi]);\n\n  const { loading, error, value } = usePolling<\n    WorkflowOverviewDTO[] | undefined\n  >(fetchWorkflowOverviews);\n\n  const isReady = React.useMemo(() => !loading && !error, [loading, error]);\n\n  return (\n    <Content noPadding>\n      {loading ? <Progress /> : null}\n      {error ? <ResponseErrorPanel error={error} /> : null}\n      {isReady ? (\n        <Grid container direction=\"column\">\n          <Grid item>\n            <WorkflowsTable items={value ?? []} />\n          </Grid>\n        </Grid>\n      ) : null}\n    </Content>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;AAgCO,MAAM,sBAAsB,MAAM;AACvC,EAAM,MAAA,eAAA,GAAkB,OAAO,kBAAkB,CAAA,CAAA;AAEjD,EAAM,MAAA,sBAAA,GAAyB,YAAY,YAAY;AACrD,IAAM,MAAA,aAAA,GAAgB,MAAM,eAAA,CAAgB,qBAAsB,EAAA,CAAA;AAClE,IAAA,OAAO,cAAc,IAAK,CAAA,SAAA,CAAA;AAAA,GAC5B,EAAG,CAAC,eAAe,CAAC,CAAA,CAAA;AAEpB,EAAA,MAAM,EAAE,OAAS,EAAA,KAAA,EAAO,KAAM,EAAA,GAAI,WAEhC,sBAAsB,CAAA,CAAA;AAExB,EAAM,MAAA,OAAA,GAAU,KAAM,CAAA,OAAA,CAAQ,MAAM,CAAC,OAAW,IAAA,CAAC,KAAO,EAAA,CAAC,OAAS,EAAA,KAAK,CAAC,CAAA,CAAA;AAExE,EAAA,uBACG,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA,EAAQ,SAAS,EAAA,IAAA,EAAA,EACf,0BAAW,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAS,CAAK,GAAA,IAAA,EACzB,wBAAS,KAAA,CAAA,aAAA,CAAA,kBAAA,EAAA,EAAmB,KAAc,EAAA,CAAA,GAAK,MAC/C,OACC,mBAAA,KAAA,CAAA,aAAA,CAAC,IAAK,EAAA,EAAA,SAAA,EAAS,MAAC,SAAU,EAAA,QAAA,EAAA,kBACvB,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA,EAAK,MAAI,IACR,EAAA,kBAAA,KAAA,CAAA,aAAA,CAAC,cAAe,EAAA,EAAA,KAAA,EAAO,SAAS,EAAC,EAAG,CACtC,CACF,IACE,IACN,CAAA,CAAA;AAEJ;;;;"}